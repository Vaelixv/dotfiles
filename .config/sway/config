# ███████╗██╗    ██╗ █████╗ ██╗   ██╗
# ██╔════╝██║    ██║██╔══██╗╚██╗ ██╔╝
# ███████╗██║ █╗ ██║███████║ ╚████╔╝ 
# ╚════██║██║███╗██║██╔══██║  ╚██╔╝  
# ███████║╚███╔███╔╝██║  ██║   ██║   
# ╚══════╝ ╚══╝╚══╝ ╚═╝  ╚═╝   ╚═╝   
# Sway Config for Vaelix - M2 MacBook Air
# Converted from Hyprland by ViegPhunt
# ----------------------------------------

### Variables
set $mod Mod4
set $term kitty
set $fileManager thunar
set $browser firefox

### Output configuration
output * bg ~/Pictures/Wallpapers/* fill

### Input configuration
input type:keyboard {
    xkb_layout us
    repeat_delay 300
    repeat_rate 50
}

input type:touchpad {
    tap enabled
    natural_scroll enabled
    dwt enabled
    accel_profile flat
    scroll_factor 0.5
}

### Idle configuration
exec swayidle -w \
    timeout 300 'swaylock -f' \
    timeout 600 'swaymsg "output * power off"' \
    resume 'swaymsg "output * power on"' \
    before-sleep 'swaylock -f'

### Autostart
exec_always --no-startup-id waybar
exec --no-startup-id swaync
exec --no-startup-id nm-applet --indicator
exec --no-startup-id blueman-applet
exec --no-startup-id wl-paste --type text --watch cliphist store
exec --no-startup-id wl-paste --type image --watch cliphist store
exec_always --no-startup-id ~/.config/vaelix/gtkthemes.sh

### Key bindings - Basic
bindsym $mod+space exec $term
bindsym $mod+e exec $fileManager
bindsym $mod+b exec $browser
bindsym $mod+q kill
bindsym $mod+Shift+q exec swaymsg -t get_tree | jq '.. | select(.focused?) | .pid' | xargs kill
bindsym $mod+Shift+Control+Escape exit
bindsym $mod+f floating toggle
bindsym $mod+p layout toggle split
bindsym $mod+j layout toggle

### Launchers
bindsym $mod+l exec swaylock
bindsym Alt+space exec ~/.config/vaelix/app_launcher.sh
bindsym $mod+period exec ~/.config/vaelix/emoji_launcher.sh
bindsym $mod+v exec ~/.config/vaelix/clipboard_launcher.sh
bindsym $mod+w exec ~/.config/vaelix/wallpaper_select.sh
bindsym $mod+Shift+w exec ~/.config/vaelix/wallpaper_random.sh
bindsym $mod+Shift+s exec grim -g "$(slurp)" ~/Pictures/Screenshots/screenshot-$(date +%Y%m%d-%H%M%S).png
bindsym $mod+h exec ~/.config/vaelix/key_hints.sh

### Navigation - Move focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

### Workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

### Move to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

### Layout
bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed
bindsym $mod+Shift+f fullscreen toggle

### Scratchpad
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

### Resizing
mode "resize" {
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px
    
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

### Media keys
bindsym XF86AudioRaiseVolume exec wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindsym XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindsym XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym XF86AudioMicMute exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindsym XF86MonBrightnessUp exec brightnessctl s 10%+
bindsym XF86MonBrightnessDown exec brightnessctl s 10%-
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPause exec playerctl play-pause
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioPrev exec playerctl previous

### Appearance
gaps inner 2
gaps outer 5
default_border pixel 2
default_floating_border pixel 2

### Colors - Catppuccin Mocha
# class                 border  backgr. text    indicator child_border
client.focused          #cdd6f4 #cdd6f4 #1e1e2e #cba6f7   #cdd6f4
client.focused_inactive #45475a #45475a #cdd6f4 #45475a   #45475a
client.unfocused        #313244 #313244 #cdd6f4 #313244   #313244
client.urgent           #f38ba8 #f38ba8 #1e1e2e #f38ba8   #f38ba8

### Window rules
for_window [app_id="pavucontrol"] floating enable
for_window [app_id="blueman-manager"] floating enable
for_window [app_id="nm-connection-editor"] floating enable
for_window [title="Picture-in-Picture"] floating enable, sticky enable

### Layer rules (blur effects)
blur enable
blur_xray disable
blur_passes 3
blur_radius 6
layer_effects "waybar" blur enable
layer_effects "swaync-control-center" blur enable
layer_effects "swaync-notification-window" blur enable
layer_effects "logout_dialog" blur enable

### Misc
focus_follows_mouse yes
mouse_warping none
workspace_auto_back_and_forth no

include /etc/sway/config.d/*
